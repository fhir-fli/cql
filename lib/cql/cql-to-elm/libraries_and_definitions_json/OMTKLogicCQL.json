{
    "library": {
        "annotation": [
            {
                "translatorVersion": "2.11.0",
                "translatorOptions": "",
                "type": "CqlToElmInfo"
            },
            {
                "libraryId": "OMTKLogicCQL",
                "libraryVersion": "1.2.3",
                "startLine": 10,
                "startChar": 1,
                "endLine": 10,
                "endChar": 52,
                "message": "Could not load source for library OMTKData2019, version 1.2.3.",
                "errorType": "include",
                "errorSeverity": "error",
                "targetIncludeLibraryId": "OMTKData2019",
                "targetIncludeLibraryVersionId": "1.2.3",
                "type": "CqlToElmError"
            },
            {
                "libraryId": "OMTKLogicCQL",
                "libraryVersion": "1.2.3",
                "startLine": 203,
                "startChar": 3,
                "endLine": 203,
                "endChar": 26,
                "message": "Could not resolve library name OMTKData.",
                "errorType": "semantic",
                "errorSeverity": "error",
                "type": "CqlToElmError"
            },
            {
                "libraryId": "OMTKLogicCQL",
                "libraryVersion": "1.2.3",
                "startLine": 258,
                "startChar": 7,
                "endLine": 258,
                "endChar": 30,
                "message": "Could not resolve library name OMTKData.",
                "errorType": "semantic",
                "errorSeverity": "error",
                "type": "CqlToElmError"
            },
            {
                "libraryId": "OMTKLogicCQL",
                "libraryVersion": "1.2.3",
                "startLine": 250,
                "startChar": 16,
                "endLine": 250,
                "endChar": 35,
                "message": "Could not resolve call to operator GetMedicationName with signature (System.Code).",
                "errorType": "semantic",
                "errorSeverity": "error",
                "type": "CqlToElmError"
            },
            {
                "libraryId": "OMTKLogicCQL",
                "libraryVersion": "1.2.3",
                "startLine": 258,
                "startChar": 7,
                "endLine": 258,
                "endChar": 30,
                "message": "Could not resolve library name OMTKData.",
                "errorType": "semantic",
                "errorSeverity": "error",
                "type": "CqlToElmError"
            },
            {
                "libraryId": "OMTKLogicCQL",
                "libraryVersion": "1.2.3",
                "startLine": 203,
                "startChar": 3,
                "endLine": 203,
                "endChar": 26,
                "message": "Could not resolve library name OMTKData.",
                "errorType": "semantic",
                "errorSeverity": "error",
                "type": "CqlToElmError"
            },
            {
                "libraryId": "OMTKLogicCQL",
                "libraryVersion": "1.2.3",
                "startLine": 307,
                "startChar": 24,
                "endLine": 307,
                "endChar": 51,
                "message": "Could not resolve call to operator GetIngredients with signature (System.Code).",
                "errorType": "semantic",
                "errorSeverity": "error",
                "type": "CqlToElmError"
            },
            {
                "libraryId": "OMTKLogicCQL",
                "libraryVersion": "1.2.3",
                "startLine": 203,
                "startChar": 3,
                "endLine": 203,
                "endChar": 26,
                "message": "Could not resolve library name OMTKData.",
                "errorType": "semantic",
                "errorSeverity": "error",
                "type": "CqlToElmError"
            },
            {
                "libraryId": "OMTKLogicCQL",
                "libraryVersion": "1.2.3",
                "startLine": 307,
                "startChar": 24,
                "endLine": 307,
                "endChar": 51,
                "message": "Could not resolve call to operator GetIngredients with signature (System.Code).",
                "errorType": "semantic",
                "errorSeverity": "error",
                "type": "CqlToElmError"
            },
            {
                "libraryId": "OMTKLogicCQL",
                "libraryVersion": "1.2.3",
                "startLine": 333,
                "startChar": 3,
                "endLine": 333,
                "endChar": 133,
                "message": "Could not resolve call to operator CalculateMMEs with signature (list<tuple{rxNormCode:System.Code,doseQuantity:System.Quantity,dosesPerDay:System.Decimal}>).",
                "errorType": "semantic",
                "errorSeverity": "error",
                "type": "CqlToElmError"
            }
        ],
        "identifier": {
            "id": "OMTKLogicCQL",
            "version": "1.2.3"
        },
        "schemaIdentifier": {
            "id": "urn:hl7-org:elm",
            "version": "r1"
        },
        "usings": {
            "def": [
                {
                    "localIdentifier": "System",
                    "uri": "urn:hl7-org:elm-types:r1"
                }
            ]
        },
        "includes": {
            "def": [
                {
                    "localIdentifier": "OMTKData",
                    "path": "OMTKData2019",
                    "version": "1.2.3"
                }
            ]
        },
        "codeSystems": {
            "def": [
                {
                    "name": "RxNorm",
                    "id": "http://www.nlm.nih.gov/research/umls/CodeSystem/rxnorm",
                    "accessLevel": "Public"
                }
            ]
        },
        "statements": {
            "def": [
                {
                    "name": "ToUCUM",
                    "context": "Patient",
                    "accessLevel": "Public",
                    "type": "FunctionDef",
                    "expression": {
                        "type": "Case",
                        "comparand": {
                            "name": "unit",
                            "type": "OperandRef"
                        },
                        "caseItem": [
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}String",
                                    "value": "MG",
                                    "type": "Literal"
                                },
                                "then": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}String",
                                    "value": "mg",
                                    "type": "Literal"
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}String",
                                    "value": "MG/ACTUAT",
                                    "type": "Literal"
                                },
                                "then": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}String",
                                    "value": "mg/{actuat}",
                                    "type": "Literal"
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}String",
                                    "value": "MG/HR",
                                    "type": "Literal"
                                },
                                "then": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}String",
                                    "value": "mg/h",
                                    "type": "Literal"
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}String",
                                    "value": "MG/ML",
                                    "type": "Literal"
                                },
                                "then": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}String",
                                    "value": "mg/mL",
                                    "type": "Literal"
                                }
                            }
                        ],
                        "else": {
                            "type": "Concatenate",
                            "operand": [
                                {
                                    "type": "Concatenate",
                                    "operand": [
                                        {
                                            "valueType": "{urn:hl7-org:elm-types:r1}String",
                                            "value": "Error: unknown{",
                                            "type": "Literal"
                                        },
                                        {
                                            "name": "unit",
                                            "type": "OperandRef"
                                        }
                                    ]
                                },
                                {
                                    "valueType": "{urn:hl7-org:elm-types:r1}String",
                                    "value": "}",
                                    "type": "Literal"
                                }
                            ]
                        }
                    },
                    "operand": [
                        {
                            "name": "unit",
                            "operandTypeSpecifier": {
                                "name": "{urn:hl7-org:elm-types:r1}String",
                                "type": "NamedTypeSpecifier"
                            }
                        }
                    ]
                },
                {
                    "name": "ToDaily",
                    "context": "Patient",
                    "accessLevel": "Public",
                    "type": "FunctionDef",
                    "expression": {
                        "type": "Case",
                        "comparand": {
                            "path": "unit",
                            "type": "Property",
                            "source": {
                                "name": "period",
                                "type": "OperandRef"
                            }
                        },
                        "caseItem": [
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}String",
                                    "value": "h",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "Multiply",
                                    "operand": [
                                        {
                                            "type": "ToDecimal",
                                            "operand": {
                                                "name": "frequency",
                                                "type": "OperandRef"
                                            }
                                        },
                                        {
                                            "type": "Divide",
                                            "operand": [
                                                {
                                                    "valueType": "{urn:hl7-org:elm-types:r1}Decimal",
                                                    "value": "24.0",
                                                    "type": "Literal"
                                                },
                                                {
                                                    "path": "value",
                                                    "type": "Property",
                                                    "source": {
                                                        "name": "period",
                                                        "type": "OperandRef"
                                                    }
                                                }
                                            ]
                                        }
                                    ]
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}String",
                                    "value": "min",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "Multiply",
                                    "operand": [
                                        {
                                            "type": "Multiply",
                                            "operand": [
                                                {
                                                    "type": "ToDecimal",
                                                    "operand": {
                                                        "name": "frequency",
                                                        "type": "OperandRef"
                                                    }
                                                },
                                                {
                                                    "type": "Divide",
                                                    "operand": [
                                                        {
                                                            "valueType": "{urn:hl7-org:elm-types:r1}Decimal",
                                                            "value": "24.0",
                                                            "type": "Literal"
                                                        },
                                                        {
                                                            "path": "value",
                                                            "type": "Property",
                                                            "source": {
                                                                "name": "period",
                                                                "type": "OperandRef"
                                                            }
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "ToDecimal",
                                            "operand": {
                                                "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                "value": "60",
                                                "type": "Literal"
                                            }
                                        }
                                    ]
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}String",
                                    "value": "s",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "Multiply",
                                    "operand": [
                                        {
                                            "type": "Multiply",
                                            "operand": [
                                                {
                                                    "type": "Multiply",
                                                    "operand": [
                                                        {
                                                            "type": "ToDecimal",
                                                            "operand": {
                                                                "name": "frequency",
                                                                "type": "OperandRef"
                                                            }
                                                        },
                                                        {
                                                            "type": "Divide",
                                                            "operand": [
                                                                {
                                                                    "valueType": "{urn:hl7-org:elm-types:r1}Decimal",
                                                                    "value": "24.0",
                                                                    "type": "Literal"
                                                                },
                                                                {
                                                                    "path": "value",
                                                                    "type": "Property",
                                                                    "source": {
                                                                        "name": "period",
                                                                        "type": "OperandRef"
                                                                    }
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "ToDecimal",
                                                    "operand": {
                                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                        "value": "60",
                                                        "type": "Literal"
                                                    }
                                                }
                                            ]
                                        },
                                        {
                                            "type": "ToDecimal",
                                            "operand": {
                                                "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                "value": "60",
                                                "type": "Literal"
                                            }
                                        }
                                    ]
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}String",
                                    "value": "d",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "Divide",
                                    "operand": [
                                        {
                                            "type": "Multiply",
                                            "operand": [
                                                {
                                                    "type": "ToDecimal",
                                                    "operand": {
                                                        "name": "frequency",
                                                        "type": "OperandRef"
                                                    }
                                                },
                                                {
                                                    "type": "Divide",
                                                    "operand": [
                                                        {
                                                            "valueType": "{urn:hl7-org:elm-types:r1}Decimal",
                                                            "value": "24.0",
                                                            "type": "Literal"
                                                        },
                                                        {
                                                            "path": "value",
                                                            "type": "Property",
                                                            "source": {
                                                                "name": "period",
                                                                "type": "OperandRef"
                                                            }
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "ToDecimal",
                                            "operand": {
                                                "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                "value": "24",
                                                "type": "Literal"
                                            }
                                        }
                                    ]
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}String",
                                    "value": "wk",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "Divide",
                                    "operand": [
                                        {
                                            "type": "Multiply",
                                            "operand": [
                                                {
                                                    "type": "ToDecimal",
                                                    "operand": {
                                                        "name": "frequency",
                                                        "type": "OperandRef"
                                                    }
                                                },
                                                {
                                                    "type": "Divide",
                                                    "operand": [
                                                        {
                                                            "valueType": "{urn:hl7-org:elm-types:r1}Decimal",
                                                            "value": "24.0",
                                                            "type": "Literal"
                                                        },
                                                        {
                                                            "path": "value",
                                                            "type": "Property",
                                                            "source": {
                                                                "name": "period",
                                                                "type": "OperandRef"
                                                            }
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "ToDecimal",
                                            "operand": {
                                                "type": "Multiply",
                                                "operand": [
                                                    {
                                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                        "value": "24",
                                                        "type": "Literal"
                                                    },
                                                    {
                                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                        "value": "7",
                                                        "type": "Literal"
                                                    }
                                                ]
                                            }
                                        }
                                    ]
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}String",
                                    "value": "mo",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "Divide",
                                    "operand": [
                                        {
                                            "type": "Multiply",
                                            "operand": [
                                                {
                                                    "type": "ToDecimal",
                                                    "operand": {
                                                        "name": "frequency",
                                                        "type": "OperandRef"
                                                    }
                                                },
                                                {
                                                    "type": "Divide",
                                                    "operand": [
                                                        {
                                                            "valueType": "{urn:hl7-org:elm-types:r1}Decimal",
                                                            "value": "24.0",
                                                            "type": "Literal"
                                                        },
                                                        {
                                                            "path": "value",
                                                            "type": "Property",
                                                            "source": {
                                                                "name": "period",
                                                                "type": "OperandRef"
                                                            }
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "ToDecimal",
                                            "operand": {
                                                "type": "Multiply",
                                                "operand": [
                                                    {
                                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                        "value": "24",
                                                        "type": "Literal"
                                                    },
                                                    {
                                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                        "value": "30",
                                                        "type": "Literal"
                                                    }
                                                ]
                                            }
                                        }
                                    ]
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}String",
                                    "value": "a",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "Divide",
                                    "operand": [
                                        {
                                            "type": "Multiply",
                                            "operand": [
                                                {
                                                    "type": "ToDecimal",
                                                    "operand": {
                                                        "name": "frequency",
                                                        "type": "OperandRef"
                                                    }
                                                },
                                                {
                                                    "type": "Divide",
                                                    "operand": [
                                                        {
                                                            "valueType": "{urn:hl7-org:elm-types:r1}Decimal",
                                                            "value": "24.0",
                                                            "type": "Literal"
                                                        },
                                                        {
                                                            "path": "value",
                                                            "type": "Property",
                                                            "source": {
                                                                "name": "period",
                                                                "type": "OperandRef"
                                                            }
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "ToDecimal",
                                            "operand": {
                                                "type": "Multiply",
                                                "operand": [
                                                    {
                                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                        "value": "24",
                                                        "type": "Literal"
                                                    },
                                                    {
                                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                        "value": "365",
                                                        "type": "Literal"
                                                    }
                                                ]
                                            }
                                        }
                                    ]
                                }
                            }
                        ],
                        "else": {
                            "asType": "{urn:hl7-org:elm-types:r1}Decimal",
                            "type": "As",
                            "operand": {
                                "type": "Null"
                            }
                        }
                    },
                    "operand": [
                        {
                            "name": "frequency",
                            "operandTypeSpecifier": {
                                "name": "{urn:hl7-org:elm-types:r1}Integer",
                                "type": "NamedTypeSpecifier"
                            }
                        },
                        {
                            "name": "period",
                            "operandTypeSpecifier": {
                                "name": "{urn:hl7-org:elm-types:r1}Quantity",
                                "type": "NamedTypeSpecifier"
                            }
                        }
                    ]
                },
                {
                    "name": "IsPatch",
                    "context": "Patient",
                    "accessLevel": "Public",
                    "type": "FunctionDef",
                    "expression": {
                        "type": "Equal",
                        "operand": [
                            {
                                "type": "ToInteger",
                                "operand": {
                                    "path": "code",
                                    "type": "Property",
                                    "source": {
                                        "name": "doseFormCode",
                                        "type": "OperandRef"
                                    }
                                }
                            },
                            {
                                "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                "value": "316987",
                                "type": "Literal"
                            }
                        ]
                    },
                    "operand": [
                        {
                            "name": "doseFormCode",
                            "operandTypeSpecifier": {
                                "name": "{urn:hl7-org:elm-types:r1}Code",
                                "type": "NamedTypeSpecifier"
                            }
                        }
                    ]
                },
                {
                    "name": "GetConversionFactor",
                    "context": "Patient",
                    "accessLevel": "Public",
                    "type": "FunctionDef",
                    "expression": {
                        "type": "Case",
                        "comparand": {
                            "type": "ToInteger",
                            "operand": {
                                "path": "code",
                                "type": "Property",
                                "source": {
                                    "name": "ingredientCode",
                                    "type": "OperandRef"
                                }
                            }
                        },
                        "caseItem": [
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "161",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "0",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "1191",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "0",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "1223",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "0",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "1767",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "0",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "1819",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "Case",
                                    "caseItem": [
                                        {
                                            "when": {
                                                "type": "Equal",
                                                "operand": [
                                                    {
                                                        "type": "ToInteger",
                                                        "operand": {
                                                            "path": "code",
                                                            "type": "Property",
                                                            "source": {
                                                                "name": "doseFormCode",
                                                                "type": "OperandRef"
                                                            }
                                                        }
                                                    },
                                                    {
                                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                        "value": "316987",
                                                        "type": "Literal"
                                                    }
                                                ]
                                            },
                                            "then": {
                                                "valueType": "{urn:hl7-org:elm-types:r1}Decimal",
                                                "value": "12.6",
                                                "type": "Literal"
                                            }
                                        }
                                    ],
                                    "else": {
                                        "type": "ToDecimal",
                                        "operand": {
                                            "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                            "value": "30",
                                            "type": "Literal"
                                        }
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "1841",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "7",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "1886",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "0",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "2101",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "0",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "2354",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "0",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "2400",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "0",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "2670",
                                    "type": "Literal"
                                },
                                "then": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Decimal",
                                    "value": "0.15",
                                    "type": "Literal"
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "3423",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "4",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "3498",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "0",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "4337",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "Case",
                                    "caseItem": [
                                        {
                                            "when": {
                                                "type": "In",
                                                "operand": [
                                                    {
                                                        "type": "ToInteger",
                                                        "operand": {
                                                            "path": "code",
                                                            "type": "Property",
                                                            "source": {
                                                                "name": "doseFormCode",
                                                                "type": "OperandRef"
                                                            }
                                                        }
                                                    },
                                                    {
                                                        "type": "List",
                                                        "element": [
                                                            {
                                                                "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                                "value": "970789",
                                                                "type": "Literal"
                                                            },
                                                            {
                                                                "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                                "value": "317007",
                                                                "type": "Literal"
                                                            },
                                                            {
                                                                "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                                "value": "316992",
                                                                "type": "Literal"
                                                            }
                                                        ]
                                                    }
                                                ]
                                            },
                                            "then": {
                                                "valueType": "{urn:hl7-org:elm-types:r1}Decimal",
                                                "value": "0.13",
                                                "type": "Literal"
                                            }
                                        },
                                        {
                                            "when": {
                                                "type": "Equal",
                                                "operand": [
                                                    {
                                                        "type": "ToInteger",
                                                        "operand": {
                                                            "path": "code",
                                                            "type": "Property",
                                                            "source": {
                                                                "name": "doseFormCode",
                                                                "type": "OperandRef"
                                                            }
                                                        }
                                                    },
                                                    {
                                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                        "value": "858080",
                                                        "type": "Literal"
                                                    }
                                                ]
                                            },
                                            "then": {
                                                "valueType": "{urn:hl7-org:elm-types:r1}Decimal",
                                                "value": "0.18",
                                                "type": "Literal"
                                            }
                                        },
                                        {
                                            "when": {
                                                "type": "In",
                                                "operand": [
                                                    {
                                                        "type": "ToInteger",
                                                        "operand": {
                                                            "path": "code",
                                                            "type": "Property",
                                                            "source": {
                                                                "name": "doseFormCode",
                                                                "type": "OperandRef"
                                                            }
                                                        }
                                                    },
                                                    {
                                                        "type": "List",
                                                        "element": [
                                                            {
                                                                "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                                "value": "126542",
                                                                "type": "Literal"
                                                            },
                                                            {
                                                                "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                                "value": "346163",
                                                                "type": "Literal"
                                                            }
                                                        ]
                                                    }
                                                ]
                                            },
                                            "then": {
                                                "valueType": "{urn:hl7-org:elm-types:r1}Decimal",
                                                "value": "0.16",
                                                "type": "Literal"
                                            }
                                        },
                                        {
                                            "when": {
                                                "name": "IsPatch",
                                                "type": "FunctionRef",
                                                "operand": [
                                                    {
                                                        "name": "doseFormCode",
                                                        "type": "OperandRef"
                                                    }
                                                ]
                                            },
                                            "then": {
                                                "valueType": "{urn:hl7-org:elm-types:r1}Decimal",
                                                "value": "2.4",
                                                "type": "Literal"
                                            }
                                        }
                                    ],
                                    "else": {
                                        "type": "ToDecimal",
                                        "operand": {
                                            "type": "Message",
                                            "source": {
                                                "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                "value": "1000",
                                                "type": "Literal"
                                            },
                                            "condition": {
                                                "valueType": "{urn:hl7-org:elm-types:r1}Boolean",
                                                "value": "true",
                                                "type": "Literal"
                                            },
                                            "code": {
                                                "valueType": "{urn:hl7-org:elm-types:r1}String",
                                                "value": "Undefined",
                                                "type": "Literal"
                                            },
                                            "severity": {
                                                "valueType": "{urn:hl7-org:elm-types:r1}String",
                                                "value": "Error",
                                                "type": "Literal"
                                            },
                                            "message": {
                                                "valueType": "{urn:hl7-org:elm-types:r1}String",
                                                "value": "The dose form is unexpected",
                                                "type": "Literal"
                                            }
                                        }
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "5032",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "0",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "5489",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "1",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "5640",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "0",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "6102",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "0",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "6378",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "11",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "6754",
                                    "type": "Literal"
                                },
                                "then": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Decimal",
                                    "value": "0.1",
                                    "type": "Literal"
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "6813",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "type": "Case",
                                        "caseItem": [
                                            {
                                                "when": {
                                                    "type": "And",
                                                    "operand": [
                                                        {
                                                            "type": "GreaterOrEqual",
                                                            "operand": [
                                                                {
                                                                    "path": "value",
                                                                    "type": "Property",
                                                                    "source": {
                                                                        "name": "dailyDose",
                                                                        "type": "OperandRef"
                                                                    }
                                                                },
                                                                {
                                                                    "type": "ToDecimal",
                                                                    "operand": {
                                                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                                        "value": "1",
                                                                        "type": "Literal"
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "LessOrEqual",
                                                            "operand": [
                                                                {
                                                                    "path": "value",
                                                                    "type": "Property",
                                                                    "source": {
                                                                        "name": "dailyDose",
                                                                        "type": "OperandRef"
                                                                    }
                                                                },
                                                                {
                                                                    "type": "ToDecimal",
                                                                    "operand": {
                                                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                                        "value": "20",
                                                                        "type": "Literal"
                                                                    }
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                "then": {
                                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                    "value": "4",
                                                    "type": "Literal"
                                                }
                                            },
                                            {
                                                "when": {
                                                    "type": "And",
                                                    "operand": [
                                                        {
                                                            "type": "GreaterOrEqual",
                                                            "operand": [
                                                                {
                                                                    "path": "value",
                                                                    "type": "Property",
                                                                    "source": {
                                                                        "name": "dailyDose",
                                                                        "type": "OperandRef"
                                                                    }
                                                                },
                                                                {
                                                                    "type": "ToDecimal",
                                                                    "operand": {
                                                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                                        "value": "21",
                                                                        "type": "Literal"
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "LessOrEqual",
                                                            "operand": [
                                                                {
                                                                    "path": "value",
                                                                    "type": "Property",
                                                                    "source": {
                                                                        "name": "dailyDose",
                                                                        "type": "OperandRef"
                                                                    }
                                                                },
                                                                {
                                                                    "type": "ToDecimal",
                                                                    "operand": {
                                                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                                        "value": "40",
                                                                        "type": "Literal"
                                                                    }
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                "then": {
                                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                    "value": "8",
                                                    "type": "Literal"
                                                }
                                            },
                                            {
                                                "when": {
                                                    "type": "And",
                                                    "operand": [
                                                        {
                                                            "type": "GreaterOrEqual",
                                                            "operand": [
                                                                {
                                                                    "path": "value",
                                                                    "type": "Property",
                                                                    "source": {
                                                                        "name": "dailyDose",
                                                                        "type": "OperandRef"
                                                                    }
                                                                },
                                                                {
                                                                    "type": "ToDecimal",
                                                                    "operand": {
                                                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                                        "value": "41",
                                                                        "type": "Literal"
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "LessOrEqual",
                                                            "operand": [
                                                                {
                                                                    "path": "value",
                                                                    "type": "Property",
                                                                    "source": {
                                                                        "name": "dailyDose",
                                                                        "type": "OperandRef"
                                                                    }
                                                                },
                                                                {
                                                                    "type": "ToDecimal",
                                                                    "operand": {
                                                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                                        "value": "60",
                                                                        "type": "Literal"
                                                                    }
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                "then": {
                                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                    "value": "10",
                                                    "type": "Literal"
                                                }
                                            },
                                            {
                                                "when": {
                                                    "type": "GreaterOrEqual",
                                                    "operand": [
                                                        {
                                                            "path": "value",
                                                            "type": "Property",
                                                            "source": {
                                                                "name": "dailyDose",
                                                                "type": "OperandRef"
                                                            }
                                                        },
                                                        {
                                                            "type": "ToDecimal",
                                                            "operand": {
                                                                "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                                "value": "61",
                                                                "type": "Literal"
                                                            }
                                                        }
                                                    ]
                                                },
                                                "then": {
                                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                    "value": "12",
                                                    "type": "Literal"
                                                }
                                            }
                                        ],
                                        "else": {
                                            "type": "Message",
                                            "source": {
                                                "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                "value": "1000",
                                                "type": "Literal"
                                            },
                                            "condition": {
                                                "type": "Less",
                                                "operand": [
                                                    {
                                                        "path": "value",
                                                        "type": "Property",
                                                        "source": {
                                                            "name": "dailyDose",
                                                            "type": "OperandRef"
                                                        }
                                                    },
                                                    {
                                                        "type": "ToDecimal",
                                                        "operand": {
                                                            "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                            "value": "1",
                                                            "type": "Literal"
                                                        }
                                                    }
                                                ]
                                            },
                                            "code": {
                                                "valueType": "{urn:hl7-org:elm-types:r1}String",
                                                "value": "Undefined",
                                                "type": "Literal"
                                            },
                                            "severity": {
                                                "valueType": "{urn:hl7-org:elm-types:r1}String",
                                                "value": "Error",
                                                "type": "Literal"
                                            },
                                            "message": {
                                                "valueType": "{urn:hl7-org:elm-types:r1}String",
                                                "value": "The dose range is unexpected",
                                                "type": "Literal"
                                            }
                                        }
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "7052",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "1",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "7242",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "0",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "7243",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "0",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "7804",
                                    "type": "Literal"
                                },
                                "then": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Decimal",
                                    "value": "1.5",
                                    "type": "Literal"
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "7814",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "3",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "8001",
                                    "type": "Literal"
                                },
                                "then": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Decimal",
                                    "value": "0.37",
                                    "type": "Literal"
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "8163",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "0",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "8175",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "0",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "8745",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "0",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "8896",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "0",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "9009",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "0",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "10689",
                                    "type": "Literal"
                                },
                                "then": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Decimal",
                                    "value": "0.1",
                                    "type": "Literal"
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "10849",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "0",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "19759",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "0",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "19860",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "0",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "22696",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "0",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "22697",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "0",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "23088",
                                    "type": "Literal"
                                },
                                "then": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Decimal",
                                    "value": "0.25",
                                    "type": "Literal"
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "27084",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "0",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "35780",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "0",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "237005",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "8",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "636827",
                                    "type": "Literal"
                                },
                                "then": {
                                    "type": "ToDecimal",
                                    "operand": {
                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                        "value": "0",
                                        "type": "Literal"
                                    }
                                }
                            },
                            {
                                "when": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                    "value": "787390",
                                    "type": "Literal"
                                },
                                "then": {
                                    "valueType": "{urn:hl7-org:elm-types:r1}Decimal",
                                    "value": "0.4",
                                    "type": "Literal"
                                }
                            }
                        ],
                        "else": {
                            "type": "ToDecimal",
                            "operand": {
                                "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                "value": "0",
                                "type": "Literal"
                            }
                        }
                    },
                    "operand": [
                        {
                            "name": "ingredientCode",
                            "operandTypeSpecifier": {
                                "name": "{urn:hl7-org:elm-types:r1}Code",
                                "type": "NamedTypeSpecifier"
                            }
                        },
                        {
                            "name": "dailyDose",
                            "operandTypeSpecifier": {
                                "name": "{urn:hl7-org:elm-types:r1}Quantity",
                                "type": "NamedTypeSpecifier"
                            }
                        },
                        {
                            "name": "doseFormCode",
                            "operandTypeSpecifier": {
                                "name": "{urn:hl7-org:elm-types:r1}Code",
                                "type": "NamedTypeSpecifier"
                            }
                        }
                    ]
                },
                {
                    "name": "EnsureMicrogramQuantity",
                    "context": "Patient",
                    "accessLevel": "Public",
                    "type": "FunctionDef",
                    "expression": {
                        "type": "If",
                        "condition": {
                            "type": "And",
                            "operand": [
                                {
                                    "type": "Less",
                                    "operand": [
                                        {
                                            "path": "value",
                                            "type": "Property",
                                            "source": {
                                                "name": "strength",
                                                "type": "OperandRef"
                                            }
                                        },
                                        {
                                            "valueType": "{urn:hl7-org:elm-types:r1}Decimal",
                                            "value": "0.1",
                                            "type": "Literal"
                                        }
                                    ]
                                },
                                {
                                    "type": "Equal",
                                    "operand": [
                                        {
                                            "type": "PositionOf",
                                            "pattern": {
                                                "valueType": "{urn:hl7-org:elm-types:r1}String",
                                                "value": "mg",
                                                "type": "Literal"
                                            },
                                            "string": {
                                                "path": "unit",
                                                "type": "Property",
                                                "source": {
                                                    "name": "strength",
                                                    "type": "OperandRef"
                                                }
                                            }
                                        },
                                        {
                                            "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                            "value": "0",
                                            "type": "Literal"
                                        }
                                    ]
                                }
                            ]
                        },
                        "then": {
                            "classType": "{urn:hl7-org:elm-types:r1}Quantity",
                            "type": "Instance",
                            "element": [
                                {
                                    "name": "value",
                                    "value": {
                                        "type": "Multiply",
                                        "operand": [
                                            {
                                                "path": "value",
                                                "type": "Property",
                                                "source": {
                                                    "name": "strength",
                                                    "type": "OperandRef"
                                                }
                                            },
                                            {
                                                "type": "ToDecimal",
                                                "operand": {
                                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                    "value": "1000",
                                                    "type": "Literal"
                                                }
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "unit",
                                    "value": {
                                        "type": "Concatenate",
                                        "operand": [
                                            {
                                                "valueType": "{urn:hl7-org:elm-types:r1}String",
                                                "value": "mcg",
                                                "type": "Literal"
                                            },
                                            {
                                                "type": "Substring",
                                                "stringToSub": {
                                                    "path": "unit",
                                                    "type": "Property",
                                                    "source": {
                                                        "name": "strength",
                                                        "type": "OperandRef"
                                                    }
                                                },
                                                "startIndex": {
                                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                    "value": "2",
                                                    "type": "Literal"
                                                }
                                            }
                                        ]
                                    }
                                }
                            ]
                        },
                        "else": {
                            "name": "strength",
                            "type": "OperandRef"
                        }
                    },
                    "operand": [
                        {
                            "name": "strength",
                            "operandTypeSpecifier": {
                                "name": "{urn:hl7-org:elm-types:r1}Quantity",
                                "type": "NamedTypeSpecifier"
                            }
                        }
                    ]
                },
                {
                    "name": "GetDailyDose",
                    "context": "Patient",
                    "accessLevel": "Public",
                    "type": "FunctionDef",
                    "expression": {
                        "type": "Case",
                        "caseItem": [
                            {
                                "when": {
                                    "name": "IsPatch",
                                    "type": "FunctionRef",
                                    "operand": [
                                        {
                                            "name": "doseFormCode",
                                            "type": "OperandRef"
                                        }
                                    ]
                                },
                                "then": {
                                    "type": "If",
                                    "condition": {
                                        "type": "In",
                                        "operand": [
                                            {
                                                "type": "ToInteger",
                                                "operand": {
                                                    "path": "code",
                                                    "type": "Property",
                                                    "source": {
                                                        "name": "ingredientCode",
                                                        "type": "OperandRef"
                                                    }
                                                }
                                            },
                                            {
                                                "type": "List",
                                                "element": [
                                                    {
                                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                        "value": "1819",
                                                        "type": "Literal"
                                                    },
                                                    {
                                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                        "value": "4337",
                                                        "type": "Literal"
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    "then": {
                                        "classType": "{urn:hl7-org:elm-types:r1}Quantity",
                                        "type": "Instance",
                                        "element": [
                                            {
                                                "name": "value",
                                                "value": {
                                                    "type": "Multiply",
                                                    "operand": [
                                                        {
                                                            "type": "Multiply",
                                                            "operand": [
                                                                {
                                                                    "name": "dosesPerDay",
                                                                    "type": "OperandRef"
                                                                },
                                                                {
                                                                    "path": "value",
                                                                    "type": "Property",
                                                                    "source": {
                                                                        "name": "doseQuantity",
                                                                        "type": "OperandRef"
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "path": "value",
                                                            "type": "Property",
                                                            "source": {
                                                                "name": "strength",
                                                                "type": "OperandRef"
                                                            }
                                                        }
                                                    ]
                                                }
                                            },
                                            {
                                                "name": "unit",
                                                "value": {
                                                    "path": "unit",
                                                    "type": "Property",
                                                    "source": {
                                                        "name": "strength",
                                                        "type": "OperandRef"
                                                    }
                                                }
                                            }
                                        ]
                                    },
                                    "else": {
                                        "asType": "{urn:hl7-org:elm-types:r1}Quantity",
                                        "type": "As",
                                        "operand": {
                                            "type": "Null"
                                        }
                                    }
                                }
                            },
                            {
                                "when": {
                                    "type": "In",
                                    "operand": [
                                        {
                                            "path": "unit",
                                            "type": "Property",
                                            "source": {
                                                "name": "doseQuantity",
                                                "type": "OperandRef"
                                            }
                                        },
                                        {
                                            "type": "List",
                                            "element": [
                                                {
                                                    "valueType": "{urn:hl7-org:elm-types:r1}String",
                                                    "value": "mg",
                                                    "type": "Literal"
                                                },
                                                {
                                                    "valueType": "{urn:hl7-org:elm-types:r1}String",
                                                    "value": "mcg",
                                                    "type": "Literal"
                                                }
                                            ]
                                        }
                                    ]
                                },
                                "then": {
                                    "classType": "{urn:hl7-org:elm-types:r1}Quantity",
                                    "type": "Instance",
                                    "element": [
                                        {
                                            "name": "value",
                                            "value": {
                                                "type": "Multiply",
                                                "operand": [
                                                    {
                                                        "name": "dosesPerDay",
                                                        "type": "OperandRef"
                                                    },
                                                    {
                                                        "path": "value",
                                                        "type": "Property",
                                                        "source": {
                                                            "name": "doseQuantity",
                                                            "type": "OperandRef"
                                                        }
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "name": "unit",
                                            "value": {
                                                "path": "unit",
                                                "type": "Property",
                                                "source": {
                                                    "name": "doseQuantity",
                                                    "type": "OperandRef"
                                                }
                                            }
                                        }
                                    ]
                                }
                            },
                            {
                                "when": {
                                    "type": "And",
                                    "operand": [
                                        {
                                            "type": "Equal",
                                            "operand": [
                                                {
                                                    "path": "unit",
                                                    "type": "Property",
                                                    "source": {
                                                        "name": "doseQuantity",
                                                        "type": "OperandRef"
                                                    }
                                                },
                                                {
                                                    "valueType": "{urn:hl7-org:elm-types:r1}String",
                                                    "value": "mL",
                                                    "type": "Literal"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "Equal",
                                            "operand": [
                                                {
                                                    "type": "PositionOf",
                                                    "pattern": {
                                                        "valueType": "{urn:hl7-org:elm-types:r1}String",
                                                        "value": "/mL",
                                                        "type": "Literal"
                                                    },
                                                    "string": {
                                                        "path": "unit",
                                                        "type": "Property",
                                                        "source": {
                                                            "name": "strength",
                                                            "type": "OperandRef"
                                                        }
                                                    }
                                                },
                                                {
                                                    "type": "Subtract",
                                                    "operand": [
                                                        {
                                                            "type": "Length",
                                                            "operand": {
                                                                "path": "unit",
                                                                "type": "Property",
                                                                "source": {
                                                                    "name": "strength",
                                                                    "type": "OperandRef"
                                                                }
                                                            }
                                                        },
                                                        {
                                                            "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                            "value": "3",
                                                            "type": "Literal"
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                "then": {
                                    "classType": "{urn:hl7-org:elm-types:r1}Quantity",
                                    "type": "Instance",
                                    "element": [
                                        {
                                            "name": "value",
                                            "value": {
                                                "type": "Multiply",
                                                "operand": [
                                                    {
                                                        "type": "Multiply",
                                                        "operand": [
                                                            {
                                                                "name": "dosesPerDay",
                                                                "type": "OperandRef"
                                                            },
                                                            {
                                                                "path": "value",
                                                                "type": "Property",
                                                                "source": {
                                                                    "name": "doseQuantity",
                                                                    "type": "OperandRef"
                                                                }
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "path": "value",
                                                        "type": "Property",
                                                        "source": {
                                                            "name": "strength",
                                                            "type": "OperandRef"
                                                        }
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "name": "unit",
                                            "value": {
                                                "type": "Substring",
                                                "stringToSub": {
                                                    "path": "unit",
                                                    "type": "Property",
                                                    "source": {
                                                        "name": "strength",
                                                        "type": "OperandRef"
                                                    }
                                                },
                                                "startIndex": {
                                                    "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                    "value": "0",
                                                    "type": "Literal"
                                                },
                                                "length": {
                                                    "type": "PositionOf",
                                                    "pattern": {
                                                        "valueType": "{urn:hl7-org:elm-types:r1}String",
                                                        "value": "/",
                                                        "type": "Literal"
                                                    },
                                                    "string": {
                                                        "path": "unit",
                                                        "type": "Property",
                                                        "source": {
                                                            "name": "strength",
                                                            "type": "OperandRef"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        ],
                        "else": {
                            "classType": "{urn:hl7-org:elm-types:r1}Quantity",
                            "type": "Instance",
                            "element": [
                                {
                                    "name": "value",
                                    "value": {
                                        "type": "Multiply",
                                        "operand": [
                                            {
                                                "type": "Multiply",
                                                "operand": [
                                                    {
                                                        "name": "dosesPerDay",
                                                        "type": "OperandRef"
                                                    },
                                                    {
                                                        "path": "value",
                                                        "type": "Property",
                                                        "source": {
                                                            "name": "doseQuantity",
                                                            "type": "OperandRef"
                                                        }
                                                    }
                                                ]
                                            },
                                            {
                                                "path": "value",
                                                "type": "Property",
                                                "source": {
                                                    "name": "strength",
                                                    "type": "OperandRef"
                                                }
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "unit",
                                    "value": {
                                        "type": "Substring",
                                        "stringToSub": {
                                            "path": "unit",
                                            "type": "Property",
                                            "source": {
                                                "name": "strength",
                                                "type": "OperandRef"
                                            }
                                        },
                                        "startIndex": {
                                            "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                            "value": "0",
                                            "type": "Literal"
                                        },
                                        "length": {
                                            "type": "PositionOf",
                                            "pattern": {
                                                "valueType": "{urn:hl7-org:elm-types:r1}String",
                                                "value": "/",
                                                "type": "Literal"
                                            },
                                            "string": {
                                                "path": "unit",
                                                "type": "Property",
                                                "source": {
                                                    "name": "strength",
                                                    "type": "OperandRef"
                                                }
                                            }
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "operand": [
                        {
                            "name": "ingredientCode",
                            "operandTypeSpecifier": {
                                "name": "{urn:hl7-org:elm-types:r1}Code",
                                "type": "NamedTypeSpecifier"
                            }
                        },
                        {
                            "name": "strength",
                            "operandTypeSpecifier": {
                                "name": "{urn:hl7-org:elm-types:r1}Quantity",
                                "type": "NamedTypeSpecifier"
                            }
                        },
                        {
                            "name": "doseFormCode",
                            "operandTypeSpecifier": {
                                "name": "{urn:hl7-org:elm-types:r1}Code",
                                "type": "NamedTypeSpecifier"
                            }
                        },
                        {
                            "name": "doseQuantity",
                            "operandTypeSpecifier": {
                                "name": "{urn:hl7-org:elm-types:r1}Quantity",
                                "type": "NamedTypeSpecifier"
                            }
                        },
                        {
                            "name": "dosesPerDay",
                            "operandTypeSpecifier": {
                                "name": "{urn:hl7-org:elm-types:r1}Decimal",
                                "type": "NamedTypeSpecifier"
                            }
                        }
                    ]
                },
                {
                    "name": "GetDailyDoseDescription",
                    "context": "Patient",
                    "accessLevel": "Public",
                    "type": "FunctionDef",
                    "expression": {
                        "type": "Case",
                        "caseItem": [
                            {
                                "when": {
                                    "name": "IsPatch",
                                    "type": "FunctionRef",
                                    "operand": [
                                        {
                                            "name": "doseFormCode",
                                            "type": "OperandRef"
                                        }
                                    ]
                                },
                                "then": {
                                    "type": "If",
                                    "condition": {
                                        "type": "In",
                                        "operand": [
                                            {
                                                "type": "ToInteger",
                                                "operand": {
                                                    "path": "code",
                                                    "type": "Property",
                                                    "source": {
                                                        "name": "ingredientCode",
                                                        "type": "OperandRef"
                                                    }
                                                }
                                            },
                                            {
                                                "type": "List",
                                                "element": [
                                                    {
                                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                        "value": "1819",
                                                        "type": "Literal"
                                                    },
                                                    {
                                                        "valueType": "{urn:hl7-org:elm-types:r1}Integer",
                                                        "value": "4337",
                                                        "type": "Literal"
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    "then": {
                                        "type": "Concatenate",
                                        "operand": [
                                            {
                                                "type": "Concatenate",
                                                "operand": [
                                                    {
                                                        "type": "Concatenate",
                                                        "operand": [
                                                            {
                                                                "type": "Concatenate",
                                                                "operand": [
                                                                    {
                                                                        "type": "Concatenate",
                                                                        "operand": [
                                                                            {
                                                                                "type": "Concatenate",
                                                                                "operand": [
                                                                                    {
                                                                                        "name": "ingredientName",
                                                                                        "type": "OperandRef"
                                                                                    },
                                                                                    {
                                                                                        "valueType": "{urn:hl7-org:elm-types:r1}String",
                                                                                        "value": " patch: ",
                                                                                        "type": "Literal"
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "type": "ToString",
                                                                                "operand": {
                                                                                    "path": "value",
                                                                                    "type": "Property",
                                                                                    "source": {
                                                                                        "name": "doseQuantity",
                                                                                        "type": "OperandRef"
                                                                                    }
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        "valueType": "{urn:hl7-org:elm-types:r1}String",
                                                                        "value": " * ",
                                                                        "type": "Literal"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "type": "ToString",
                                                                "operand": {
                                                                    "name": "strength",
                                                                    "type": "OperandRef"
                                                                }
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "valueType": "{urn:hl7-org:elm-types:r1}String",
                                                        "value": " = ",
                                                        "type": "Literal"
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "ToString",
                                                "operand": {
                                                    "name": "dailyDose",
                                                    "type": "OperandRef"
                                                }
                                            }
                                        ]
                                    },
                                    "else": {
                                        "asType": "{urn:hl7-org:elm-types:r1}String",
                                        "type": "As",
                                        "operand": {
                                            "type": "Null"
                                        }
                                    }
                                }
                            },
                            {
                                "when": {
                                    "type": "In",
                                    "operand": [
                                        {
                                            "path": "unit",
                                            "type": "Property",
                                            "source": {
                                                "name": "doseQuantity",
                                                "type": "OperandRef"
                                            }
                                        },
                                        {
                                            "type": "List",
                                            "element": [
                                                {
                                                    "valueType": "{urn:hl7-org:elm-types:r1}String",
                                                    "value": "mg",
                                                    "type": "Literal"
                                                },
                                                {
                                                    "valueType": "{urn:hl7-org:elm-types:r1}String",
                                                    "value": "mcg",
                                                    "type": "Literal"
                                                }
                                            ]
                                        }
                                    ]
                                },
                                "then": {
                                    "type": "Concatenate",
                                    "operand": [
                                        {
                                            "type": "Concatenate",
                                            "operand": [
                                                {
                                                    "type": "Concatenate",
                                                    "operand": [
                                                        {
                                                            "type": "Concatenate",
                                                            "operand": [
                                                                {
                                                                    "type": "Concatenate",
                                                                    "operand": [
                                                                        {
                                                                            "type": "Concatenate",
                                                                            "operand": [
                                                                                {
                                                                                    "type": "Concatenate",
                                                                                    "operand": [
                                                                                        {
                                                                                            "type": "Concatenate",
                                                                                            "operand": [
                                                                                                {
                                                                                                    "name": "ingredientName",
                                                                                                    "type": "OperandRef"
                                                                                                },
                                                                                                {
                                                                                                    "valueType": "{urn:hl7-org:elm-types:r1}String",
                                                                                                    "value": " ",
                                                                                                    "type": "Literal"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "name": "doseFormName",
                                                                                            "type": "OperandRef"
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "valueType": "{urn:hl7-org:elm-types:r1}String",
                                                                                    "value": ": ",
                                                                                    "type": "Literal"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "ToString",
                                                                            "operand": {
                                                                                "name": "dosesPerDay",
                                                                                "type": "OperandRef"
                                                                            }
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "valueType": "{urn:hl7-org:elm-types:r1}String",
                                                                    "value": "/d * ",
                                                                    "type": "Literal"
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "ToString",
                                                            "operand": {
                                                                "name": "doseQuantity",
                                                                "type": "OperandRef"
                                                            }
                                                        }
                                                    ]
                                                },
                                                {
                                                    "valueType": "{urn:hl7-org:elm-types:r1}String",
                                                    "value": " = ",
                                                    "type": "Literal"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "ToString",
                                            "operand": {
                                                "name": "dailyDose",
                                                "type": "OperandRef"
                                            }
                                        }
                                    ]
                                }
                            }
                        ],
                        "else": {
                            "type": "Concatenate",
                            "operand": [
                                {
                                    "type": "Concatenate",
                                    "operand": [
                                        {
                                            "type": "Concatenate",
                                            "operand": [
                                                {
                                                    "type": "Concatenate",
                                                    "operand": [
                                                        {
                                                            "type": "Concatenate",
                                                            "operand": [
                                                                {
                                                                    "type": "Concatenate",
                                                                    "operand": [
                                                                        {
                                                                            "type": "Concatenate",
                                                                            "operand": [
                                                                                {
                                                                                    "type": "Concatenate",
                                                                                    "operand": [
                                                                                        {
                                                                                            "type": "Concatenate",
                                                                                            "operand": [
                                                                                                {
                                                                                                    "type": "Concatenate",
                                                                                                    "operand": [
                                                                                                        {
                                                                                                            "name": "ingredientName",
                                                                                                            "type": "OperandRef"
                                                                                                        },
                                                                                                        {
                                                                                                            "valueType": "{urn:hl7-org:elm-types:r1}String",
                                                                                                            "value": " ",
                                                                                                            "type": "Literal"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "name": "doseFormName",
                                                                                                    "type": "OperandRef"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "valueType": "{urn:hl7-org:elm-types:r1}String",
                                                                                            "value": ": ",
                                                                                            "type": "Literal"
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "ToString",
                                                                                    "operand": {
                                                                                        "name": "dosesPerDay",
                                                                                        "type": "OperandRef"
                                                                                    }
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "valueType": "{urn:hl7-org:elm-types:r1}String",
                                                                            "value": "/d * ",
                                                                            "type": "Literal"
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "ToString",
                                                                    "operand": {
                                                                        "name": "doseQuantity",
                                                                        "type": "OperandRef"
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "valueType": "{urn:hl7-org:elm-types:r1}String",
                                                            "value": " * ",
                                                            "type": "Literal"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "ToString",
                                                    "operand": {
                                                        "name": "strength",
                                                        "type": "OperandRef"
                                                    }
                                                }
                                            ]
                                        },
                                        {
                                            "valueType": "{urn:hl7-org:elm-types:r1}String",
                                            "value": " = ",
                                            "type": "Literal"
                                        }
                                    ]
                                },
                                {
                                    "type": "ToString",
                                    "operand": {
                                        "name": "dailyDose",
                                        "type": "OperandRef"
                                    }
                                }
                            ]
                        }
                    },
                    "operand": [
                        {
                            "name": "ingredientCode",
                            "operandTypeSpecifier": {
                                "name": "{urn:hl7-org:elm-types:r1}Code",
                                "type": "NamedTypeSpecifier"
                            }
                        },
                        {
                            "name": "ingredientName",
                            "operandTypeSpecifier": {
                                "name": "{urn:hl7-org:elm-types:r1}String",
                                "type": "NamedTypeSpecifier"
                            }
                        },
                        {
                            "name": "strength",
                            "operandTypeSpecifier": {
                                "name": "{urn:hl7-org:elm-types:r1}Quantity",
                                "type": "NamedTypeSpecifier"
                            }
                        },
                        {
                            "name": "doseFormCode",
                            "operandTypeSpecifier": {
                                "name": "{urn:hl7-org:elm-types:r1}Code",
                                "type": "NamedTypeSpecifier"
                            }
                        },
                        {
                            "name": "doseFormName",
                            "operandTypeSpecifier": {
                                "name": "{urn:hl7-org:elm-types:r1}String",
                                "type": "NamedTypeSpecifier"
                            }
                        },
                        {
                            "name": "doseQuantity",
                            "operandTypeSpecifier": {
                                "name": "{urn:hl7-org:elm-types:r1}Quantity",
                                "type": "NamedTypeSpecifier"
                            }
                        },
                        {
                            "name": "dosesPerDay",
                            "operandTypeSpecifier": {
                                "name": "{urn:hl7-org:elm-types:r1}Decimal",
                                "type": "NamedTypeSpecifier"
                            }
                        },
                        {
                            "name": "dailyDose",
                            "operandTypeSpecifier": {
                                "name": "{urn:hl7-org:elm-types:r1}Quantity",
                                "type": "NamedTypeSpecifier"
                            }
                        }
                    ]
                },
                {
                    "name": "TestCalculateMMEs",
                    "context": "Patient",
                    "accessLevel": "Public",
                    "expression": {
                        "type": "Null"
                    }
                }
            ]
        }
    }
}